<!doctype html>
<title>Resources - WarcBot</title>
<div id="myTable">
</div>

<style>
    html, body {
        height: 100%;
        padding: 0;
        margin: 0;
    }
    body {
        font-family: sans-serif;
    }
</style>
<script type="module">
    import {WarcBotTabulator, formatSize} from "./tables.js";

    const table = new WarcBotTabulator("#myTable", {
        ajaxURL: '/api/resources',
        filterMode: 'remote',
        height: '100%',
        layout: "dataFill",
        pagination: true,
        paginationMode: "remote",
        paginationCounter:"rows",
        paginationSize: 100,
        sortMode: "remote",
        persistence: {
            headerFilter: true,
            sort: true
        },
        columns: [
            {title: "Date", field: "date", formatter: "datetime", formatterParams: {inputFormat: "iso"}, width: 140},
            {title: "Method", field: "method", width: 50},
            {title: "URL", field: "url", formatter: "link", headerFilter: 'input', headerFilterPlaceholder: "Search", tooltip:true, maxWidth: 500},
            {title: "Status", field: "status", width: 50, headerFilter: 'input', hozAlign: 'center'},
            {title: "Type", field: "type"},
            {title: "Media Type", field: "payloadType"},
            {title: "Size", field: "payloadSize", width: "70", hozAlign: 'right', formatter: cell => formatSize(cell.getValue())},
            {title: "Transferred", field: "transferred", width: "70", hozAlign: 'right', formatter: cell => formatSize(cell.getValue())},
            {title: "Protocol", field: "protocol", width: 40, hozAlign: 'center'},
            {title: "IP Address", field: "ipAddress"},
            {title: "Page ID", field: "pageId", headerFilter: 'input', headerFilterPlaceholder: "Search"},
            {title: "Digest", field: "payloadDigest", headerFilter: 'input', headerFilterPlaceholder: "Search"},
        ],
    });
</script>
